
<!-- Toolbar -->
<div class="panel panel-default">

    <!-- For Trip Build -->
    <div class="panel-heading" data-ng-if="isBuilding && (tripPresentation == undefined)">
        <h4 class="panel-title">Building trip...</h4>
    </div>

    <!-- For Trip Show -->
    <div class="panel-heading" data-ng-if="tripPresentation != undefined">
        <div class="row">
            <div class="col-sm-6" style="margin-top: 5px; margin-bottom: 5px;">
                <h4 class="no-margin text-center" data-gyf-countdown data-ng-if="tripPresentation.baseTime == undefined"></h4>
                <h4 class="no-margin text-center" data-ng-if="tripPresentation.baseTime != undefined">{{tripPresentation.baseTime | date: 'mediumTime'}}</h4>
            </div>
            <div class="col-sm-6" style="margin-top: 5px; margin-bottom: 5px;">
                <span class="pull-right">
                    <span data-gyf-countdown data-source-time='tripPresentation.buildTime'></span>
                    <button type="button" class="btn btn-default" data-ng-click="onTripRefreshClick()">
                        <span class="glyphicon glyphicon-refresh"></span>
                    </button>
                </span>
            </div>
        </div>
    </div>

</div>

<!-- Trip -->
<div class="panel panel-default" data-ng-if="tripPresentation != undefined">

    <div class="panel-heading">
        <div class="row link" data-ng-click="onHeaderClick(tripId, stopId, tripPresentation.baseTime)">
            <div class="col-xs-1">
                <h3 class="no-margin text-left">
                    <span class="label label-default" data-ng-style="{'color': tripPresentation.routeTextColor, 'background-color': tripPresentation.routeColor}">{{tripPresentation.routeName}}</span>
                </h3>
            </div>
            <div class="col-xs-11">
                <h5 class="no-margin text-center">
                    <div>{{tripPresentation.tripHeadsign}}</div>
                </h5>
            </div>
        </div>
    </div>

    <div class="panel-body">
        <table class="table table-bordered table-hover table-condensed">
            <tbody>
                <tr class="row link" data-ng-repeat="stopTime in tripPresentation.stopTimes" data-ng-attr-id="{{stopTime.isCurrent ? 'currentStopTime' : undefined}}" data-ng-class="{'row-past': (stopTime.stopTime < tripPresentation.buildTime)}" data-ng-click="onStopClick(stopTime, tripPresentation.baseTime)">
                    <td class="col-xs-1">
                        <h5 data-ng-class="{'row-current': stopTime.isCurrent}">{{stopTime.stopTimeDiff}}</h5>
                    </td>
                    <td class="col-xs-8">
                        <h5 data-ng-class="{'row-current': stopTime.isCurrent}">{{stopTime.stopName}}</h5>
                    </td>
                    <td class="col-xs-1">
                        <div data-ng-if="stopTime.vehicle != undefined">
                            <h6 data-ng-class="{'row-current': stopTime.isCurrent}">
                                <span class="glyphicon glyphicon-map-marker"></span>&nbsp;
                                <span data-gyf-countdown data-source-time='stopTime.vehicle.lastUpdateTime'></span>&nbsp;
                                <span>{{stopTime.vehicle.status}}</span>
                            </h6>
                        </div>
                    </td>
                    <td class="col-xs-1">
                        <h5 data-ng-class="{'row-current': stopTime.isCurrent}">{{stopTime.stopTimeString}}</h5>
                    </td>
                    <td class="col-xs-1">
                        <h5 data-ng-if="stopTime.isCurrent || stopTime.isSubsequent" data-ng-class="{'row-current': stopTime.isCurrent}"><span data-gyf-countdown data-base-time='tripPresentation.baseTime' data-target-time='stopTime.stopTime'></span></h5>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>
